# WARNING - Generated by {fusen} from /dev/severity_index.Rmd: do not edit by hand

#' Generate results
#' 
#' Generates sorted results tables and attaches back to the coin. This is a helper
#' function which is called by [f_build_index()].
#' 
#' @param coin The coin
#'              
#' @importFrom COINr is.coin get_results
#' 
#' @return Updated coin.
#' 
#' @export
#' @examples
#' #
f_generate_results <- function(coin){

  stopifnot(COINr::is.coin(coin),
            !is.null(coin$Data$Aggregated))

  # generate results tables (attached to coin, so will appear when exported to Excel)
  coin <- COINr::get_results(coin, dset = "Aggregated", tab_type = "Full",
                      also_get = "uName", nround = 1, out2 = "coin")
  coin <- COINr::get_results(coin, dset = "Aggregated", tab_type = "Full", use = "ranks",
                      also_get = "uName", nround = 1, out2 = "coin")

  return(coin)
    
}
